{"ast":null,"code":"var _jsxFileName = \"/Users/sebamaza/Downloads/salon-fiestas-admin/src/context/AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { supabase } from '../services/supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(undefined);\nexport const useAuth = () => {\n  _s();\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth debe ser usado dentro de un AuthProvider');\n  }\n  return context;\n};\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    // Verificar sesi贸n actual de Supabase\n    const checkSession = async () => {\n      if (!supabase) {\n        setIsLoading(false);\n        return;\n      }\n      const {\n        data: {\n          session\n        }\n      } = await supabase.auth.getSession();\n      if (session !== null && session !== void 0 && session.user) {\n        var _session$user$user_me, _session$user$email, _session$user$user_me2, _session$user$user_me3;\n        const userData = {\n          id: session.user.id,\n          email: session.user.email || '',\n          name: ((_session$user$user_me = session.user.user_metadata) === null || _session$user$user_me === void 0 ? void 0 : _session$user$user_me.name) || ((_session$user$email = session.user.email) === null || _session$user$email === void 0 ? void 0 : _session$user$email.split('@')[0]) || 'Usuario',\n          role: ((_session$user$user_me2 = session.user.user_metadata) === null || _session$user$user_me2 === void 0 ? void 0 : _session$user$user_me2.role) || 'dj',\n          avatar: (_session$user$user_me3 = session.user.user_metadata) === null || _session$user$user_me3 === void 0 ? void 0 : _session$user$user_me3.avatar\n        };\n        setUser(userData);\n      }\n      setIsLoading(false);\n    };\n    checkSession();\n\n    // Escuchar cambios de autenticaci贸n\n    const {\n      data: {\n        subscription\n      }\n    } = (supabase === null || supabase === void 0 ? void 0 : supabase.auth.onAuthStateChange(async (event, session) => {\n      if (event === 'SIGNED_IN' && session !== null && session !== void 0 && session.user) {\n        var _session$user$user_me4, _session$user$email2, _session$user$user_me5, _session$user$user_me6;\n        const userData = {\n          id: session.user.id,\n          email: session.user.email || '',\n          name: ((_session$user$user_me4 = session.user.user_metadata) === null || _session$user$user_me4 === void 0 ? void 0 : _session$user$user_me4.name) || ((_session$user$email2 = session.user.email) === null || _session$user$email2 === void 0 ? void 0 : _session$user$email2.split('@')[0]) || 'Usuario',\n          role: ((_session$user$user_me5 = session.user.user_metadata) === null || _session$user$user_me5 === void 0 ? void 0 : _session$user$user_me5.role) || 'dj',\n          avatar: (_session$user$user_me6 = session.user.user_metadata) === null || _session$user$user_me6 === void 0 ? void 0 : _session$user$user_me6.avatar\n        };\n        setUser(userData);\n      } else if (event === 'SIGNED_OUT') {\n        setUser(null);\n      }\n    })) || {\n      data: {\n        subscription: null\n      }\n    };\n    return () => subscription === null || subscription === void 0 ? void 0 : subscription.unsubscribe();\n  }, []);\n  const login = async credentials => {\n    if (!supabase) return false;\n    setIsLoading(true);\n    try {\n      const {\n        data,\n        error\n      } = await supabase.auth.signInWithPassword({\n        email: credentials.email,\n        password: credentials.password\n      });\n      if (error) {\n        console.error('Error de login:', error);\n        setIsLoading(false);\n        return false;\n      }\n      if (data.user) {\n        var _data$user$user_metad, _data$user$email, _data$user$user_metad2, _data$user$user_metad3;\n        const userData = {\n          id: data.user.id,\n          email: data.user.email || '',\n          name: ((_data$user$user_metad = data.user.user_metadata) === null || _data$user$user_metad === void 0 ? void 0 : _data$user$user_metad.name) || ((_data$user$email = data.user.email) === null || _data$user$email === void 0 ? void 0 : _data$user$email.split('@')[0]) || 'Usuario',\n          role: ((_data$user$user_metad2 = data.user.user_metadata) === null || _data$user$user_metad2 === void 0 ? void 0 : _data$user$user_metad2.role) || 'dj',\n          avatar: (_data$user$user_metad3 = data.user.user_metadata) === null || _data$user$user_metad3 === void 0 ? void 0 : _data$user$user_metad3.avatar\n        };\n        setUser(userData);\n        setIsLoading(false);\n        return true;\n      }\n      setIsLoading(false);\n      return false;\n    } catch (error) {\n      console.error('Error en login:', error);\n      setIsLoading(false);\n      return false;\n    }\n  };\n  const logout = async () => {\n    if (supabase) {\n      await supabase.auth.signOut();\n    }\n    setUser(null);\n  };\n  const value = {\n    user,\n    login,\n    logout,\n    isLoading\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n};\n_s2(AuthProvider, \"YajQB7LURzRD+QP5gw0+K2TZIWA=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","supabase","jsxDEV","_jsxDEV","AuthContext","undefined","useAuth","_s","context","Error","AuthProvider","children","_s2","user","setUser","isLoading","setIsLoading","checkSession","data","session","auth","getSession","_session$user$user_me","_session$user$email","_session$user$user_me2","_session$user$user_me3","userData","id","email","name","user_metadata","split","role","avatar","subscription","onAuthStateChange","event","_session$user$user_me4","_session$user$email2","_session$user$user_me5","_session$user$user_me6","unsubscribe","login","credentials","error","signInWithPassword","password","console","_data$user$user_metad","_data$user$email","_data$user$user_metad2","_data$user$user_metad3","logout","signOut","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/sebamaza/Downloads/salon-fiestas-admin/src/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { User, LoginCredentials, AuthContextType } from '../types';\nimport { supabase } from '../services/supabaseClient';\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth debe ser usado dentro de un AuthProvider');\n  }\n  return context;\n};\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Verificar sesi贸n actual de Supabase\n    const checkSession = async () => {\n      if (!supabase) {\n        setIsLoading(false);\n        return;\n      }\n\n      const { data: { session } } = await supabase.auth.getSession();\n      if (session?.user) {\n        const userData: User = {\n          id: session.user.id,\n          email: session.user.email || '',\n          name: session.user.user_metadata?.name || session.user.email?.split('@')[0] || 'Usuario',\n          role: session.user.user_metadata?.role || 'dj',\n          avatar: session.user.user_metadata?.avatar\n        };\n        setUser(userData);\n      }\n      setIsLoading(false);\n    };\n\n    checkSession();\n\n    // Escuchar cambios de autenticaci贸n\n    const { data: { subscription } } = supabase?.auth.onAuthStateChange(async (event, session) => {\n      if (event === 'SIGNED_IN' && session?.user) {\n        const userData: User = {\n          id: session.user.id,\n          email: session.user.email || '',\n          name: session.user.user_metadata?.name || session.user.email?.split('@')[0] || 'Usuario',\n          role: session.user.user_metadata?.role || 'dj',\n          avatar: session.user.user_metadata?.avatar\n        };\n        setUser(userData);\n      } else if (event === 'SIGNED_OUT') {\n        setUser(null);\n      }\n    }) || { data: { subscription: null } };\n\n    return () => subscription?.unsubscribe();\n  }, []);\n\n  const login = async (credentials: LoginCredentials): Promise<boolean> => {\n    if (!supabase) return false;\n    \n    setIsLoading(true);\n    \n    try {\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email: credentials.email,\n        password: credentials.password\n      });\n\n      if (error) {\n        console.error('Error de login:', error);\n        setIsLoading(false);\n        return false;\n      }\n\n      if (data.user) {\n        const userData: User = {\n          id: data.user.id,\n          email: data.user.email || '',\n          name: data.user.user_metadata?.name || data.user.email?.split('@')[0] || 'Usuario',\n          role: data.user.user_metadata?.role || 'dj',\n          avatar: data.user.user_metadata?.avatar\n        };\n        setUser(userData);\n        setIsLoading(false);\n        return true;\n      }\n\n      setIsLoading(false);\n      return false;\n    } catch (error) {\n      console.error('Error en login:', error);\n      setIsLoading(false);\n      return false;\n    }\n  };\n\n  const logout = async () => {\n    if (supabase) {\n      await supabase.auth.signOut();\n    }\n    setUser(null);\n  };\n\n  const value: AuthContextType = {\n    user,\n    login,\n    logout,\n    isLoading\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}